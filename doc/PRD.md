# 电影搜索应用 (Movie Search App) - 产品需求文档 (PRD)

**版本 V2.0 (单页版)**

---

### 1. 项目概述

#### 1.1. 项目背景
随着在线流媒体的普及，用户越来越需要在海量电影资源中快速找到自己感兴趣的内容。本项目旨在开发一个轻量、快速、易用的电影搜索应用，帮助用户发现和了解电影信息。

#### 1.2. 目标用户
- 任何想要快速查找电影信息的普通用户。
- 需要查找特定电影基本资料（如年份、导演、评分）的影迷。

#### 1.3. 核心价值
- **高效搜索**: 提供一个简洁的界面，让用户能够通过关键词快速搜索到相关电影。
- **信息聚合**: 在一个视图中清晰地展示电影的关键信息，并提供深入了解的入口。
- **个性化收藏**: 允许用户建立自己的"待看清单"，将应用从一次性工具转变为个人影库。

---

### 2. 功能需求

#### 2.1. V1.0 功能列表 (已完成)
| 功能模块 | 功能点 |
| :--- | :--- |
| **核心搜索** | 用户可以输入关键词进行搜索 |
| **结果展示** | 以网格的形式展示搜索到的电影 |
| **状态处理** | 已实现加载、空状态、错误状态的提示 |
| **基础样式** | 已实现应用整体的UI/UX设计 |

#### 2.2. V2.0 新增功能列表

| 功能模块 | 功能点 | 优先级 |
| :--- | :--- | :--- |
| **电影详情** | 点击电影卡片可查看电影详情页 | **P0** |
| **分页加载** | 当搜索结果过多时，可加载更多 | **P1** |
| **待看清单** | 用户可以将电影加入/移出"待看清单" | **P1** |
| **热门推荐** | 应用初始加载时，展示热门电影 | **P2** |

#### 2.3. 用户故事 (V2.0 新增)
- **作为一名用户**，当我对一部电影产生兴趣后，我希望能够点击它，立刻看到它的详细剧情介绍、演员阵容和评分。
- **作为一名用户**，当我搜索一个有很多结果的词时，我希望能方便地浏览所有相关的电影，而不是只能看到前20个。
- **作为一名用户**，当我发现一部好电影但暂时没时间看时，我希望能先把它加入我的待看清单，以后再也不会忘记。
- **作为一名用户**，当我打开应用时，即使我不知道要搜什么，我也希望能立刻看到一些当前流行或评价很高的电影。

- **作为一名用户**，我希望能有一个输入框，可以让我输入想找的电影名字，然后点击一个按钮或者按回车来开始搜索。
- **作为一名用户**，我希望在搜索后能看到一个包含电影海报、标题和上映年份的列表，这样我就可以快速识别我想找的电影。
- **作为一名用户**，如果搜索需要时间，我希望能看到一个加载动画，而不是一个空白的页面，这样我就知道应用正在工作。
- **作为一名用户**，如果我的搜索没有找到任何结果，我希望能得到明确的提示，比如"未找到相关电影"。

#### 2.3. 页面流程 (V2.0 单页版)
```mermaid
graph TD
    subgraph "应用主视图"
        A(打开应用) --> B{显示热门电影};
        B --> C[输入搜索关键词];
        C --> D{点击搜索/按回车};
        D --> E[显示加载中...];
        E --> F{API返回数据};
        F -- 成功且有结果 --> G[在主视图显示电影列表];
        F -- 成功但无结果 --> H[提示"未找到结果"];
        F -- 请求失败 --> I[提示"网络错误"];
    end

    subgraph "详情与收藏"
        G -- 点击电影卡片 --> J{在主视图显示电影详情};
        J -- 点击返回按钮 --> G;
        J -- 点击收藏 --> K(加入待看清单);
    end
    
    subgraph "待看清单"
       L(导航栏) -- 点击'我的收藏' --> M{筛选并显示已收藏电影};
       M -- 再次点击 --> B;
    end
```

---

### 3. 视图与组件设计 (V2.0 单页版)

#### 3.1. 电影详情视图 (Movie Details View)
- **触发方式**: 点击 `MovieList` 中的任意 `MovieCard`。
- **显示方式**: 在应用主区域，替换掉 `MovieList` 视图。
- **展示内容**:
    - 电影海报（大图）
    - 标题、上映年份、片长
    - 剧情简介 (Overview)
    - 类型标签 (Genres)
    - 用户评分 (Vote Average)
    - "添加到待看清单"按钮
    - **(可选)** 演员列表、预告片链接
    - **必须包含一个"返回"按钮**，用于返回到电影列表视图。

#### 3.2. 待看清单视图 (Watchlist View)
- **触发方式**: 点击导航栏的"我的收藏"按钮。
- **显示方式**: 在应用主区域，筛选 `MovieList`，只显示已收藏的电影。
- **展示内容**:
    - 以与首页相同的 `MovieList`/`MovieCard` 布局，展示所有已收藏的电影。

---

### 4. 非功能性需求

- **性能**: 搜索请求的响应时间应在2秒以内。页面加载流畅，无明显卡顿。
- **易用性**: 界面简洁直观，用户无需学习即可上手使用。
- **兼容性**: 能够在主流现代浏览器（Chrome, Firefox, Safari, Edge）上正常运行。 

---

### 5. V3.0 新增功能列表 (进阶与优化)

为了帮助用户更好地学习 React，我们将引入以下进阶功能：

| 功能模块 | 功能点 | 优先级 | 学习价值 |
| :--- | :--- | :--- | :--- |
| **代码优化** | 将电影数据逻辑抽象为自定义 Hook (`useMovies`) | **P0** | 逻辑复用、关注点分离 |
| **状态管理** | 使用 Context API 管理“待看清单” | **P1** | 全局状态管理、避免 Prop Drilling |

#### 5.1. 功能详情

##### 5.1.1. 将电影数据逻辑抽象为自定义 Hook (`useMovies`)

*   **目标**: 将 `App.jsx` 中所有与电影数据相关的状态（`movies`, `loading`, `error`, `page` 等）和逻辑（`searchMovies`, `loadMore`, `fetchPopularMovies` 等）封装到一个名为 `useMovies` 的自定义 Hook 中。
*   **用户故事**:
    *   **作为一名开发者**，我希望 `App.jsx` 组件更简洁，只关注 UI 渲染，而不是复杂的电影数据获取逻辑。
    *   **作为一名开发者**，我希望电影数据获取逻辑是可复用的，以便将来在其他组件中也能方便地使用。
*   **验收标准**:
    *   `src/hooks/useMovies.js` 文件被创建。
    *   `App.jsx` 不再直接管理电影数据相关的 State 和副作用，而是通过调用 `useMovies()` 来获取数据和操作函数。
    *   应用功能保持不变，电影搜索、加载更多、热门推荐等功能正常工作。

##### 5.1.2. 使用 Context API 管理“待看清单”

*   **目标**: 创建一个 `WatchlistContext`，用于在应用中全局共享和管理“待看清单”的状态。
*   **用户故事**:
    *   **作为一名开发者**，我希望“待看清单”的状态能够在任何需要它的组件中方便地访问和修改，而不需要通过 props 层层传递。
*   **验收标准**:
    *   `src/context/WatchlistContext.js` 文件被创建（如果 `src/context` 目录不存在则创建）。
    *   `App.jsx` 或其父组件提供 `WatchlistContext.Provider`。
    *   `MovieDetails` 组件能够通过 `useContext` 添加/移除电影到待看清单。
    *   “待看清单”视图（如果已实现）能够通过 `useContext` 获取并展示已收藏的电影。
    *   “待看清单”的状态在应用中保持同步。 